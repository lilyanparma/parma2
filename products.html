<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>إدارة المنتجات - نظام الدُفعات</title>
  
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
  <script src="data/firebase-config.js"></script>
  <script src="https://unpkg.com/@zxing/library@latest"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
  
  <style>
   :root{--primary:#4361ee;--secondary:#3f37c9;--success:#28a745;--danger:#f72585;--warning:#ffc107;--info:#17a2b8;--light:#f8f9fa;--dark:#212529}*{box-sizing:border-box;margin:0;padding:0;font-family:'Tajawal',sans-serif}body{background-color:var(--light);color:var(--dark)}.container{max-width:1000px;margin:0 auto;padding:20px}header{background:linear-gradient(135deg,var(--primary),var(--secondary));color:white;padding:20px;border-radius:12px;margin-bottom:20px;box-shadow:0 4px 15px rgba(67,97,238,0.3);text-align:center}h1{font-size:1.8rem;margin-bottom:10px}.control-buttons{display:flex;justify-content:center;flex-wrap:wrap;gap:15px;margin-bottom:20px}.btn{padding:12px 28px;border:none;border-radius:15px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all 0.4s cubic-bezier(0.19,1,0.22,1);display:inline-flex;align-items:center;justify-content:center;gap:10px;position:relative;color:white;text-shadow:0 1px 2px rgba(0,0,0,0.2);box-shadow:6px 6px 12px rgba(0,0,0,0.15),-4px -4px 10px rgba(255,255,255,0.8)}.btn:hover{transform:translateY(-3px) scale(1.02);box-shadow:10px 10px 20px rgba(0,0,0,0.2),-6px -6px 15px rgba(255,255,255,0.8)}.btn:active{transform:translateY(1px) scale(0.98);box-shadow:inset 4px 4px 8px rgba(0,0,0,0.2),inset -4px -4px 8px rgba(255,255,255,0.5)}.btn-primary{background:linear-gradient(145deg,#4361ee,#3a0ca3)}.btn-secondary{background:linear-gradient(145deg,#6c757d,#495057)}.btn-success{background:linear-gradient(145deg,#28a745,#1e7e34)}.btn-danger{background:linear-gradient(145deg,#f72585,#b5179e)}.btn-warning{background:linear-gradient(145deg,#ffc107,#f3722c)}.btn-info{background:linear-gradient(145deg,#17a2b8,#107585)}.input-section{background:white;padding:20px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.05);margin-bottom:20px;display:flex;gap:10px}.input-field{width:100%;padding:12px;border:1px solid #ddd;border-radius:8px;font-size:1rem;flex-grow:1}.input-section .btn{flex-shrink:0}#cameraScanner{width:100%;max-height:450px;margin:25px 0;border-radius:20px;overflow:hidden;display:none;position:relative;box-shadow:0 15px 35px rgba(0,0,0,0.1)}#cameraScanner{width:100%;max-height:450px;margin:25px 0;border-radius:20px;overflow:hidden;display:none;position:relative;box-shadow:0 15px 35px rgba(0,0,0,0.1);border:1px solid rgba(0,0,0,0.05)}#cameraScanner video{width:100%;height:auto;display:block}.scanner-overlay{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;pointer-events:none;background:rgba(0,0,0,0.3)}.scanner-frame{width:80%;height:200px;border:4px solid rgba(255,255,255,0.7);border-radius:15px;box-shadow:0 0 0 10000px rgba(0,0,0,0.5);margin-bottom:20px}.scanner-instruction{color:white;text-align:center;font-size:1.2rem;text-shadow:0 1px 3px rgba(0,0,0,0.5);margin-top:10px}.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.6);z-index:1000;overflow-y:auto;backdrop-filter:blur(4px)}.modal-content{background-color:white;margin:5% auto;padding:25px;border-radius:15px;width:90%;max-width:600px;box-shadow:0 5px 20px rgba(0,0,0,0.2);position:relative}.close-btn{position:absolute;top:15px;left:15px;font-size:1.5rem;cursor:pointer;color:var(--dark)}.product-info{width:100%;border-collapse:collapse;margin:15px 0}.product-info td{padding:12px;border:1px solid #eee}.info-label{background-color:#f9f9f9;font-weight:bold;width:40%}.product-image{max-width:100%;max-height:200px;border-radius:8px;margin-top:15px;display:block;margin-left:auto;margin-right:auto}.modal-actions{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-top:20px}.batch-card{background:white;border-radius:8px;padding:15px;margin-bottom:15px;box-shadow:0 2px 5px rgba(0,0,0,0.1);border-left:4px solid var(--primary)}.batch-header{display:flex;justify-content:space-between;margin-bottom:10px;align-items:flex-start}.batch-details p{margin:4px 0;font-size:0.95rem}.batch-actions{display:flex;gap:8px;align-items:center}.batch-btn{padding:5px 10px;border-radius:5px;font-size:0.9rem;color:white!important}.batch-status-badges{margin-top:10px;display:flex;flex-wrap:wrap;gap:8px}.badge{padding:4px 10px;border-radius:20px;font-size:0.8rem;font-weight:500;display:inline-flex;align-items:center;gap:5px}.badge.danger{background-color:var(--danger);color:white}.badge.warning{background-color:var(--warning);color:var(--dark)}.badge.info{background-color:var(--info);color:white}.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:15px}@media (max-width:600px){.form-grid{grid-template-columns:1fr}}.notification{position:fixed;bottom:20px;left:20px;max-width:350px;padding:15px;border-radius:12px;box-shadow:0 5px 20px rgba(0,0,0,0.2);display:none;align-items:center;z-index:2000;animation:slideUp 0.5s ease;color:white}@keyframes slideUp{from{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}.notification.show{display:flex}.notification i{margin-left:15px;font-size:1.5rem}.notification.success{background:var(--success)}.notification.warning{background:var(--warning);color:var(--dark)}.notification.error{background:var(--danger)}.notification.info{background:var(--info)}.notification-content{flex:1}.notification-title{font-weight:bold}
  </style>
</head>
<body>
<script>
const _0x54a1ca=_0x21b0;(function(_0x702ccb,_0x551cc3){const _0x2cdab2=_0x21b0,_0x4e35b3=_0x702ccb();while(!![]){try{const _0x91742c=parseInt(_0x2cdab2(0x1f1))/0x1*(parseInt(_0x2cdab2(0x220))/0x2)+-parseInt(_0x2cdab2(0x249))/0x3+parseInt(_0x2cdab2(0x22c))/0x4*(-parseInt(_0x2cdab2(0x203))/0x5)+-parseInt(_0x2cdab2(0x251))/0x6+-parseInt(_0x2cdab2(0x298))/0x7*(parseInt(_0x2cdab2(0x240))/0x8)+parseInt(_0x2cdab2(0x1fc))/0x9*(parseInt(_0x2cdab2(0x1e6))/0xa)+parseInt(_0x2cdab2(0x26e))/0xb*(parseInt(_0x2cdab2(0x216))/0xc);if(_0x91742c===_0x551cc3)break;else _0x4e35b3['push'](_0x4e35b3['shift']());}catch(_0x306d80){_0x4e35b3['push'](_0x4e35b3['shift']());}}}(_0x534a,0x8f3f9));const _0x48bd04=(function(){let _0x28f3dd=!![];return function(_0x3524a0,_0x1f749a){const _0x13de18=_0x28f3dd?function(){const _0x426ff2=_0x21b0;if(_0x1f749a){if(_0x426ff2(0x28e)===_0x426ff2(0x28e)){const _0x45a020=_0x1f749a[_0x426ff2(0x1ea)](_0x3524a0,arguments);return _0x1f749a=null,_0x45a020;}else for(let _0x3fc733=0x0;_0x3fc733<_0xf55abe['length'];_0x3fc733+=0x2){if(_0x4f8208==_0x5dde4f[_0x3fc733]&&_0x3eb4c1[_0x426ff2(0x2b1)](_0x331cb6)!=_0x5d042f[_0x3fc733+0x1])return![];}}}:function(){};return _0x28f3dd=![],_0x13de18;};}()),_0x16bf59=_0x48bd04(this,function(){const _0xcdae42=_0x21b0;let _0x1681ab;try{const _0x3b4e2f=Function(_0xcdae42(0x23b)+_0xcdae42(0x27d)+');');_0x1681ab=_0x3b4e2f();}catch(_0x2c8e8e){_0x1681ab=window;}const _0x325600=new RegExp(_0xcdae42(0x256),'g'),_0x4d157c=_0xcdae42(0x279)[_0xcdae42(0x27b)](_0x325600,'')[_0xcdae42(0x25d)](';');let _0x99efc1,_0x194d6f,_0x367a78,_0x5106d9;const _0x1ba112=function(_0x26678d,_0x333c39,_0x4aeb98){const _0x216d0e=_0xcdae42;if(_0x26678d['length']!=_0x333c39)return![];for(let _0x176519=0x0;_0x176519<_0x333c39;_0x176519++){if(_0x216d0e(0x1f9)===_0x216d0e(0x1f9))for(let _0x120294=0x0;_0x120294<_0x4aeb98[_0x216d0e(0x250)];_0x120294+=0x2){if(_0x216d0e(0x276)!==_0x216d0e(0x276))_0x75cb1d[_0x216d0e(0x224)]('Admin\x20access\x20granted\x20to\x20report\x20page.');else{if(_0x176519==_0x4aeb98[_0x120294]&&_0x26678d[_0x216d0e(0x2b1)](_0x176519)!=_0x4aeb98[_0x120294+0x1])return![];}}else(_0x43b6d5[_0x216d0e(0x250)]==_0x3e3ad4['length']||_0x448942[_0x216d0e(0x28b)]('.')===0x0)&&(_0x3f9695=!![]);}return!![];},_0x344e75=function(_0x48032c,_0x4cdd23,_0x1d553b){return _0x1ba112(_0x4cdd23,_0x1d553b,_0x48032c);},_0x521d74=function(_0x49e192,_0x433186,_0x4a5366){const _0x1aa380=_0xcdae42;if(_0x1aa380(0x2ae)===_0x1aa380(0x2ae))return _0x344e75(_0x433186,_0x49e192,_0x4a5366);else _0x3d642a={'code':_0x25616b,..._0x315eaf['val']()},_0x4fa608(_0x362e8e),_0x385cb6('success',_0x1aa380(0x23e),'تم\x20العثور\x20على\x20المنتج');},_0x4c5628=function(_0x2e7cb7,_0x3b0a95,_0x3f2d22){return _0x521d74(_0x3b0a95,_0x3f2d22,_0x2e7cb7);};for(let _0x1dcc1f in _0x1681ab){if(_0x1ba112(_0x1dcc1f,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x99efc1=_0x1dcc1f;break;}}for(let _0xb8909d in _0x1681ab[_0x99efc1]){if('XUJTY'==='XUJTY'){if(_0x4c5628(0x6,_0xb8909d,[0x5,0x6e,0x0,0x64])){_0x194d6f=_0xb8909d;break;}}else{const _0x20f15b=_0x2a1768[_0xcdae42(0x2b6)](_0xcdae42(0x293));_0x20f15b[_0xcdae42(0x284)][_0xcdae42(0x231)]===_0xcdae42(0x226)?_0x20f15b[_0xcdae42(0x284)][_0xcdae42(0x231)]=_0xcdae42(0x24a):(_0x3c6859(),_0x20f15b[_0xcdae42(0x284)][_0xcdae42(0x231)]=_0xcdae42(0x226),_0x5bf269[_0xcdae42(0x2b6)]('productCodeInput')[_0xcdae42(0x253)]());}}for(let _0x344101 in _0x1681ab[_0x99efc1]){if(_0x521d74(_0x344101,[0x7,0x6e,0x0,0x6c],0x8)){_0x367a78=_0x344101;break;}}if(!('~'>_0x194d6f))for(let _0x5c70bb in _0x1681ab[_0x99efc1][_0x367a78]){if(_0x344e75([0x7,0x65,0x0,0x68],_0x5c70bb,0x8)){_0x5106d9=_0x5c70bb;break;}}if(!_0x99efc1||!_0x1681ab[_0x99efc1]){if(_0xcdae42(0x235)!==_0xcdae42(0x21d))return;else{const _0x5b258b=(_0xb17f91[_0xcdae42(0x241)]||0x0)['toFixed'](0x2),_0x5b291c=(_0x43f1dd[_0xcdae42(0x269)]||0x0)[_0xcdae42(0x24f)](0x2),_0x372420=_0xa3d5f3(_0x44f36a),_0x591309=_0x413e94['createElement'](_0xcdae42(0x1ef));_0x591309[_0xcdae42(0x26f)]=_0xcdae42(0x290),_0x591309[_0xcdae42(0x2a9)]=_0xcdae42(0x274)+(_0x407d87['batchNumber']||_0x22cb03['id'])+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>الكمية:</strong>\x20'+_0x52530f[_0xcdae42(0x22e)]+_0xcdae42(0x247)+_0x5b258b+'\x20د.م\x20|\x20<strong>البيع:</strong>\x20'+_0x5b291c+_0xcdae42(0x20e)+_0x53c17c[_0xcdae42(0x27c)]+_0xcdae42(0x215)+_0x372420+_0xcdae42(0x287)+_0x507a0a['id']+_0xcdae42(0x1f5)+_0x264e34['id']+'\x27)\x22><i\x20class=\x22fas\x20fa-trash\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',_0x29563a[_0xcdae42(0x25e)](_0x591309);}}const _0x4d5d90=_0x1681ab[_0x99efc1][_0x194d6f],_0x150bce=!!_0x1681ab[_0x99efc1][_0x367a78]&&_0x1681ab[_0x99efc1][_0x367a78][_0x5106d9],_0x4bb45b=_0x4d5d90||_0x150bce;if(!_0x4bb45b)return;let _0x1d106f=![];for(let _0x490a90=0x0;_0x490a90<_0x4d157c[_0xcdae42(0x250)];_0x490a90++){if(_0xcdae42(0x29d)==='AvVWl'){const _0x55aa90=_0x4d157c[_0x490a90],_0x3fb899=_0x55aa90[0x0]===String[_0xcdae42(0x21f)](0x2e)?_0x55aa90[_0xcdae42(0x264)](0x1):_0x55aa90,_0x2be738=_0x4bb45b['length']-_0x3fb899[_0xcdae42(0x250)],_0x29c5e3=_0x4bb45b[_0xcdae42(0x28b)](_0x3fb899,_0x2be738),_0x353015=_0x29c5e3!==-0x1&&_0x29c5e3===_0x2be738;_0x353015&&((_0x4bb45b[_0xcdae42(0x250)]==_0x55aa90['length']||_0x55aa90[_0xcdae42(0x28b)]('.')===0x0)&&(_0x1d106f=!![]));}else _0xee9278(_0xcdae42(0x204),_0xcdae42(0x2b2),'فشل\x20تحديث\x20المنتج');}if(!_0x1d106f){if(_0xcdae42(0x281)===_0xcdae42(0x1f4))_0x45b64d[_0xcdae42(0x29f)]===_0xcdae42(0x255)&&(_0x132c9f[_0xcdae42(0x1e3)](),_0x324dd9());else{const _0x5ab4f1=new RegExp(_0xcdae42(0x2a3),'g'),_0x26a1d1=_0xcdae42(0x29b)[_0xcdae42(0x27b)](_0x5ab4f1,'');_0x1681ab[_0x99efc1][_0x367a78]=_0x26a1d1;}}});_0x16bf59(),document[_0x54a1ca(0x239)](_0x54a1ca(0x260)),document['addEventListener']('DOMContentLoaded',function(){const _0x3b182a=_0x54a1ca;firebase['auth']()[_0x3b182a(0x28d)](function(_0x109c6f){const _0x50f762=_0x3b182a;_0x109c6f?firebase[_0x50f762(0x263)]()[_0x50f762(0x20f)](_0x50f762(0x27f)+_0x109c6f[_0x50f762(0x222)])[_0x50f762(0x24c)]('value')['then'](_0x474645=>{const _0x1c0e7a=_0x50f762;if(_0x474645[_0x1c0e7a(0x221)]()&&_0x474645[_0x1c0e7a(0x1ff)]()[_0x1c0e7a(0x230)]===_0x1c0e7a(0x280))_0x1c0e7a(0x1f2)!=='hHGJo'?_0x3e6c05=_0x4ae940['values'](_0x8a9c62[_0x1c0e7a(0x286)])[_0x1c0e7a(0x261)]((_0x194eb5,_0x259cb)=>_0x194eb5+(_0x2f8bc1(_0x259cb[_0x1c0e7a(0x22e)])||0x0),0x0):console[_0x1c0e7a(0x224)](_0x1c0e7a(0x2bb));else{if(_0x1c0e7a(0x257)===_0x1c0e7a(0x2a1)){if(_0x68ef18){const _0x4aee2b=_0x5a31ee[_0x1c0e7a(0x1ea)](_0x215158,arguments);return _0x16f0ac=null,_0x4aee2b;}}else alert(_0x1c0e7a(0x227)),window[_0x1c0e7a(0x1e1)][_0x1c0e7a(0x212)]=_0x1c0e7a(0x29c);}}):window[_0x50f762(0x1e1)][_0x50f762(0x212)]='login.html';});});let currentProduct=null,currentBatchIdToEdit=null,codeReader=new ZXing[(_0x54a1ca(0x219))](),cameraActive=![];function handleEnter(_0x104cd6){const _0x8307c7=_0x54a1ca;_0x104cd6[_0x8307c7(0x29f)]===_0x8307c7(0x255)&&(_0x104cd6[_0x8307c7(0x1e3)](),searchProduct());}async function toggleCamera(){if(cameraActive)await stopScanner();else await startScanner();}async function startScanner(){const _0x2f0b11=_0x54a1ca;document[_0x2f0b11(0x2b6)](_0x2f0b11(0x293))[_0x2f0b11(0x284)][_0x2f0b11(0x231)]=_0x2f0b11(0x24a);const _0x501448=document[_0x2f0b11(0x2b6)](_0x2f0b11(0x296));_0x501448['style'][_0x2f0b11(0x231)]=_0x2f0b11(0x2ac);try{await codeReader[_0x2f0b11(0x1e7)](undefined,_0x2f0b11(0x1f8),(_0x1995da,_0xe5b513)=>{const _0x233451=_0x2f0b11;if(_0x233451(0x283)===_0x233451(0x22b))_0x49cd15(_0x233451(0x204),_0x233451(0x209),_0x233451(0x1fa)),_0x58de93[_0x233451(0x284)][_0x233451(0x231)]='none';else{if(_0x1995da){if('artUX'===_0x233451(0x24b)){const _0x50b085=_0x1737d0(_0x233451(0x23b)+_0x233451(0x27d)+');');_0x4dd023=_0x50b085();}else stopScanner(),processScannedCode(_0x1995da[_0x233451(0x1ec)]);}}}),cameraActive=!![];}catch(_0x1b0ea7){if(_0x2f0b11(0x2a0)!=='zceaJ'){const _0x517c6c=_0x48951c?function(){const _0x3e668d=_0x2f0b11;if(_0x45bc36){const _0x380253=_0x224ff6[_0x3e668d(0x1ea)](_0x2abf23,arguments);return _0x162f60=null,_0x380253;}}:function(){};return _0x691ce6=![],_0x517c6c;}else showNotification('error',_0x2f0b11(0x209),_0x2f0b11(0x1fa)),_0x501448[_0x2f0b11(0x284)][_0x2f0b11(0x231)]=_0x2f0b11(0x24a);}}function stopScanner(){const _0x300394=_0x54a1ca;codeReader&&cameraActive&&(codeReader[_0x300394(0x23f)](),cameraActive=![]),document[_0x300394(0x2b6)](_0x300394(0x296))['style'][_0x300394(0x231)]=_0x300394(0x24a);}function showManualEntry(){const _0x37cd70=_0x54a1ca,_0x235cc4=document[_0x37cd70(0x2b6)](_0x37cd70(0x293));_0x235cc4['style'][_0x37cd70(0x231)]===_0x37cd70(0x226)?_0x235cc4['style'][_0x37cd70(0x231)]=_0x37cd70(0x24a):(stopScanner(),_0x235cc4[_0x37cd70(0x284)][_0x37cd70(0x231)]=_0x37cd70(0x226),document[_0x37cd70(0x2b6)](_0x37cd70(0x1fd))['focus']());}function searchProduct(){const _0xdda10=_0x54a1ca,_0x2b3800=document['getElementById'](_0xdda10(0x1fd))[_0xdda10(0x27e)][_0xdda10(0x229)]();if(_0x2b3800)processScannedCode(_0x2b3800);else showNotification(_0xdda10(0x20a),_0xdda10(0x22a),_0xdda10(0x1e5));}async function processScannedCode(_0x10aff5){const _0x313167=_0x54a1ca;showNotification(_0x313167(0x2a5),_0x313167(0x275),_0x313167(0x1e0)+_0x10aff5);try{const _0x5e6fb9=await database['ref'](_0x313167(0x23c)+_0x10aff5)['once'](_0x313167(0x27e));_0x5e6fb9[_0x313167(0x221)]()?(currentProduct={'code':_0x10aff5,..._0x5e6fb9['val']()},showProductInfo(currentProduct),showNotification(_0x313167(0x297),_0x313167(0x23e),_0x313167(0x291))):'EeoUv'===_0x313167(0x271)?(currentProduct={'code':_0x10aff5},showAddProductForm(_0x10aff5),showNotification(_0x313167(0x20a),_0x313167(0x2b9),_0x313167(0x2aa))):(_0xc45063[_0x313167(0x1e3)](),_0x106543());}catch(_0x4df747){showNotification(_0x313167(0x204),_0x313167(0x2a7),_0x313167(0x28a));}}function getStatusBadges(_0x20f20c){const _0x1046ea=_0x54a1ca;let _0x2b49e3='';const _0x35f16e=new Date();_0x35f16e[_0x1046ea(0x1eb)](0x0,0x0,0x0,0x0);const _0x45250d=new Date(_0x20f20c[_0x1046ea(0x27c)]),_0x3f0686=Math[_0x1046ea(0x262)]((_0x45250d-_0x35f16e)/(0x3e8*0x3c*0x3c*0x18));if(_0x3f0686<0x0){if(_0x1046ea(0x233)===_0x1046ea(0x200))return![];else _0x2b49e3+=_0x1046ea(0x270);}else _0x3f0686<=0x1e&&(_0x2b49e3+=_0x1046ea(0x210));if(_0x20f20c[_0x1046ea(0x22e)]<=0x0){if('KLqar'===_0x1046ea(0x295))_0x2b49e3+=_0x1046ea(0x1f6);else{const _0x4844e1=_0x3ecceb['getElementById'](_0x1046ea(0x1fd))[_0x1046ea(0x27e)][_0x1046ea(0x229)]();if(_0x4844e1)_0x487d92(_0x4844e1);else _0x1a7363(_0x1046ea(0x20a),_0x1046ea(0x22a),'الرجاء\x20إدخال\x20رقم\x20المنتج');}}else _0x20f20c[_0x1046ea(0x22e)]<=0x5&&(_0x2b49e3+='<span\x20class=\x22badge\x20info\x22><i\x20class=\x22fas\x20fa-box-open\x22></i>\x20كمية\x20قليلة</span>');return _0x2b49e3;}function showProductInfo(_0x19d97d){const _0x1217f6=_0x54a1ca;let _0xf042ee=0x0;if(_0x19d97d['batches']){if('qAePd'===_0x1217f6(0x28f)){_0x490f8a(_0x1217f6(0x20a),_0x1217f6(0x217),_0x1217f6(0x2b7));return;}else _0xf042ee=Object[_0x1217f6(0x236)](_0x19d97d['batches'])[_0x1217f6(0x261)]((_0x44dded,_0x4bc61c)=>_0x44dded+(Number(_0x4bc61c[_0x1217f6(0x22e)])||0x0),0x0);}const _0x319648=document['getElementById'](_0x1217f6(0x277));_0x319648['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<table\x20class=\x22product-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr><td\x20class=\x22info-label\x22>رقم\x20المنتج:</td><td>'+_0x19d97d[_0x1217f6(0x244)]+_0x1217f6(0x22d)+(_0x19d97d[_0x1217f6(0x2ba)]||'')+_0x1217f6(0x2af)+_0xf042ee+_0x1217f6(0x1e2)+(_0x19d97d[_0x1217f6(0x26b)]?_0x1217f6(0x28c)+_0x19d97d['image']+_0x1217f6(0x246):'')+_0x1217f6(0x1f7);const _0x241612=_0x319648[_0x1217f6(0x2ad)](_0x1217f6(0x2b8));if(_0x19d97d[_0x1217f6(0x286)]&&Object[_0x1217f6(0x258)](_0x19d97d[_0x1217f6(0x286)])[_0x1217f6(0x250)]>0x0){const _0x38b5eb=Object[_0x1217f6(0x225)](_0x19d97d[_0x1217f6(0x286)])[_0x1217f6(0x268)](([_0x174c08,_0xab3035])=>({'id':_0x174c08,..._0xab3035}));_0x38b5eb['sort']((_0x2b62c3,_0x3e4ee1)=>new Date(_0x2b62c3[_0x1217f6(0x27c)])-new Date(_0x3e4ee1[_0x1217f6(0x27c)])),_0x38b5eb[_0x1217f6(0x21e)](_0x20bf96=>{const _0x1435e3=_0x1217f6,_0x361d78=(_0x20bf96[_0x1435e3(0x241)]||0x0)[_0x1435e3(0x24f)](0x2),_0x20cd65=(_0x20bf96[_0x1435e3(0x269)]||0x0)['toFixed'](0x2),_0x357c37=getStatusBadges(_0x20bf96),_0x22ec54=document[_0x1435e3(0x25a)](_0x1435e3(0x1ef));_0x22ec54[_0x1435e3(0x26f)]=_0x1435e3(0x290),_0x22ec54[_0x1435e3(0x2a9)]=_0x1435e3(0x274)+(_0x20bf96[_0x1435e3(0x29a)]||_0x20bf96['id'])+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>الكمية:</strong>\x20'+_0x20bf96[_0x1435e3(0x22e)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>التكلفة:</strong>\x20'+_0x361d78+_0x1435e3(0x259)+_0x20cd65+'\x20د.م</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>الصلاحية:</strong>\x20'+_0x20bf96['expiryDate']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22batch-status-badges\x22>'+_0x357c37+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22batch-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-warning\x20batch-btn\x22\x20onclick=\x22openEditBatchModal(\x27'+_0x20bf96['id']+_0x1435e3(0x1f5)+_0x20bf96['id']+'\x27)\x22><i\x20class=\x22fas\x20fa-trash\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',_0x241612['appendChild'](_0x22ec54);});}else _0x241612[_0x1217f6(0x2a9)]='<p>لا\x20توجد\x20دفعات\x20لهذا\x20المنتج.</p>';document[_0x1217f6(0x2b6)]('modalActions')['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-primary\x22\x20onclick=\x22showEditForm()\x22><i\x20class=\x22fas\x20fa-edit\x22></i>\x20تعديل\x20بيانات\x20المنتج</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-info\x22\x20onclick=\x22showAddBatchForm()\x22><i\x20class=\x22fas\x20fa-plus\x22></i>\x20إضافة\x20دفعة\x20جديدة</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x22\x20onclick=\x22deleteProduct()\x22><i\x20class=\x22fas\x20fa-trash\x22></i>\x20حذف\x20المنتج\x20بالكامل</button>',document[_0x1217f6(0x2b6)](_0x1217f6(0x277))[_0x1217f6(0x284)]['display']=_0x1217f6(0x2ac),document[_0x1217f6(0x2b6)]('productForm')[_0x1217f6(0x284)][_0x1217f6(0x231)]=_0x1217f6(0x24a),openModal(_0x1217f6(0x25f));}function showAddProductForm(_0x5f35ee){const _0x1eabbc=_0x54a1ca;document[_0x1eabbc(0x2b6)](_0x1eabbc(0x206))['textContent']=_0x1eabbc(0x1f3);const _0x19c325=document[_0x1eabbc(0x2b6)]('productForm');_0x19c325[_0x1eabbc(0x2a9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20id=\x22editName\x22\x20class=\x22input-field\x22\x20placeholder=\x22اسم\x20المنتج\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22date\x22\x20id=\x22editDate\x22\x20class=\x22input-field\x22\x20value=\x22'+new Date()[_0x1eabbc(0x285)]()[_0x1eabbc(0x25d)]('T')[0x0]+_0x1eabbc(0x272),document[_0x1eabbc(0x2b6)](_0x1eabbc(0x21c))[_0x1eabbc(0x2a9)]=_0x1eabbc(0x2b5),document[_0x1eabbc(0x2b6)](_0x1eabbc(0x277))[_0x1eabbc(0x284)][_0x1eabbc(0x231)]=_0x1eabbc(0x24a),_0x19c325[_0x1eabbc(0x284)][_0x1eabbc(0x231)]=_0x1eabbc(0x2ac),openModal(_0x1eabbc(0x25f));}function showEditForm(){const _0x5d9db7=_0x54a1ca;document[_0x5d9db7(0x2b6)](_0x5d9db7(0x206))[_0x5d9db7(0x266)]=_0x5d9db7(0x202);const _0x3a9b37=document[_0x5d9db7(0x2b6)]('productForm');_0x3a9b37[_0x5d9db7(0x2a9)]=_0x5d9db7(0x211)+(currentProduct['name']||'')+_0x5d9db7(0x21b)+(currentProduct[_0x5d9db7(0x2a4)]||'')+_0x5d9db7(0x289),document[_0x5d9db7(0x2b6)](_0x5d9db7(0x21c))['innerHTML']='<button\x20class=\x22btn\x20btn-success\x22\x20onclick=\x22updateProduct()\x22><i\x20class=\x22fas\x20fa-save\x22></i>\x20حفظ\x20التعديلات</button>',document[_0x5d9db7(0x2b6)](_0x5d9db7(0x277))[_0x5d9db7(0x284)][_0x5d9db7(0x231)]=_0x5d9db7(0x24a),_0x3a9b37[_0x5d9db7(0x284)][_0x5d9db7(0x231)]='block';}function showAddBatchForm(){const _0x316501=_0x54a1ca;document['getElementById'](_0x316501(0x206))[_0x316501(0x266)]='إضافة\x20دفعة\x20لـ:\x20'+currentProduct['name'];const _0x53bb07=document[_0x316501(0x2b6)]('productForm');_0x53bb07[_0x316501(0x2a9)]=_0x316501(0x232),document[_0x316501(0x2b6)]('modalActions')[_0x316501(0x2a9)]='<button\x20class=\x22btn\x20btn-success\x22\x20onclick=\x22addNewBatch()\x22><i\x20class=\x22fas\x20fa-save\x22></i>\x20إضافة\x20الدفعة</button>',document[_0x316501(0x2b6)](_0x316501(0x277))[_0x316501(0x284)][_0x316501(0x231)]='none',_0x53bb07[_0x316501(0x284)][_0x316501(0x231)]=_0x316501(0x2ac);}function openEditBatchModal(_0x2d0444){const _0x55abbc=_0x54a1ca;currentBatchIdToEdit=_0x2d0444;const _0x1d3a83=currentProduct['batches'][_0x2d0444];if(!_0x1d3a83)return;document[_0x55abbc(0x2b6)](_0x55abbc(0x265))[_0x55abbc(0x27e)]=_0x1d3a83['quantity'],document[_0x55abbc(0x2b6)](_0x55abbc(0x214))[_0x55abbc(0x27e)]=_0x1d3a83[_0x55abbc(0x27c)],document['getElementById'](_0x55abbc(0x245))[_0x55abbc(0x27e)]=_0x1d3a83['price']||'',document['getElementById'](_0x55abbc(0x243))['value']=_0x1d3a83[_0x55abbc(0x241)]||'',openModal('editBatchModal');}async function updateBatch(){const _0x22e78e=_0x54a1ca;if(!currentBatchIdToEdit)return;const _0x781440=document[_0x22e78e(0x2b6)](_0x22e78e(0x265))['value'],_0x706158=document[_0x22e78e(0x2b6)]('editBatchExpiry')[_0x22e78e(0x27e)],_0x37e0d3=document['getElementById']('editBatchPrice')[_0x22e78e(0x27e)],_0x6afdfc=document[_0x22e78e(0x2b6)](_0x22e78e(0x243))[_0x22e78e(0x27e)];if(!_0x781440||!_0x706158){showNotification(_0x22e78e(0x20a),_0x22e78e(0x22a),'الرجاء\x20ملء\x20حقول\x20الكمية\x20والتاريخ.');return;}const _0x23fe42={'quantity':Number(_0x781440),'expiryDate':_0x706158,'price':Number(_0x37e0d3)||null,'cost':Number(_0x6afdfc)||null};try{await database['ref'](_0x22e78e(0x23c)+currentProduct['code']+_0x22e78e(0x208)+currentBatchIdToEdit)['update'](_0x23fe42),currentProduct['batches'][currentBatchIdToEdit]={...currentProduct[_0x22e78e(0x286)][currentBatchIdToEdit],..._0x23fe42},showNotification(_0x22e78e(0x297),_0x22e78e(0x23e),_0x22e78e(0x282)),closeModal(_0x22e78e(0x228)),showProductInfo(currentProduct);}catch(_0x387ea3){showNotification(_0x22e78e(0x204),'خطأ',_0x22e78e(0x27a));}}async function uploadToImgur(_0x350f3d){const _0x15c72a=_0x54a1ca,_0x29a567=new FormData();_0x29a567[_0x15c72a(0x242)](_0x15c72a(0x26b),_0x350f3d);try{const _0xa1faa0=await fetch(_0x15c72a(0x2b3),{'method':_0x15c72a(0x273),'headers':{'Authorization':_0x15c72a(0x1ed)},'body':_0x29a567}),_0x7c6947=await _0xa1faa0[_0x15c72a(0x20c)]();return _0x7c6947[_0x15c72a(0x297)]?_0x7c6947[_0x15c72a(0x207)][_0x15c72a(0x294)]:null;}catch(_0x847a0c){return null;}}async function addNewProduct(){const _0x47e22e=_0x54a1ca,_0x2d9606=document[_0x47e22e(0x2b6)](_0x47e22e(0x238))['value'][_0x47e22e(0x229)](),_0x5dd784=document[_0x47e22e(0x2b6)](_0x47e22e(0x26c))[_0x47e22e(0x27e)],_0x2902dd=document[_0x47e22e(0x2b6)](_0x47e22e(0x2ab))['files'][0x0],_0x49cc5a=document['getElementById'](_0x47e22e(0x29a))[_0x47e22e(0x27e)][_0x47e22e(0x229)](),_0xce5095=Number(document[_0x47e22e(0x2b6)](_0x47e22e(0x26a))['value']),_0x41e1b5=parseFloat(document[_0x47e22e(0x2b6)](_0x47e22e(0x29e))[_0x47e22e(0x27e)]),_0x116903=parseFloat(document['getElementById'](_0x47e22e(0x21a))['value']),_0x2cf4f7=document[_0x47e22e(0x2b6)](_0x47e22e(0x2a8))['value'];if(!_0x2d9606||!_0x5dd784||!_0xce5095||!_0x2cf4f7||!_0x41e1b5||isNaN(_0x116903)){if('jpeXg'!==_0x47e22e(0x1e4)){_0x1e5e96('warning',_0x47e22e(0x22a),_0x47e22e(0x2a2));return;}else{showNotification(_0x47e22e(0x20a),_0x47e22e(0x217),'الرجاء\x20ملء\x20كل\x20الحقول\x20المطلوبة\x20للمنتج\x20والدفعة\x20الأولى.');return;}}const _0x34d2a7={'code':currentProduct[_0x47e22e(0x244)],'name':_0x2d9606,'date':_0x5dd784,'batches':{}},_0x321efc=database[_0x47e22e(0x20f)]()[_0x47e22e(0x24e)]()['key'];_0x34d2a7[_0x47e22e(0x286)][_0x321efc]={'batchNumber':_0x49cc5a,'quantity':_0xce5095,'price':_0x41e1b5,'cost':_0x116903,'expiryDate':_0x2cf4f7};if(_0x2902dd){if(_0x47e22e(0x267)===_0x47e22e(0x267)){showNotification(_0x47e22e(0x2a5),'جاري\x20العمل',_0x47e22e(0x218));const _0x278787=await uploadToImgur(_0x2902dd);if(_0x278787)_0x34d2a7[_0x47e22e(0x26b)]=_0x278787;}else return _0x1ed261(_0x2164e8,_0xf6c65c,_0x3404d3);}try{_0x47e22e(0x201)!=='wkLbD'?(_0x5bea2e(),_0x35fe22['style']['display']=_0x47e22e(0x226),_0x441059[_0x47e22e(0x2b6)](_0x47e22e(0x1fd))[_0x47e22e(0x253)]()):(await database['ref'](_0x47e22e(0x23c)+currentProduct[_0x47e22e(0x244)])['set'](_0x34d2a7),showNotification(_0x47e22e(0x297),_0x47e22e(0x23e),_0x47e22e(0x2b4)),currentProduct=_0x34d2a7,showProductInfo(currentProduct));}catch(_0xcfcd8){_0x47e22e(0x24d)!==_0x47e22e(0x24d)?(_0x16759b={'code':_0x51b465},_0x1f8038(_0x2c032a),_0x1c72f8(_0x47e22e(0x20a),_0x47e22e(0x2b9),'يرجى\x20إدخال\x20بيانات\x20المنتج\x20الجديد')):showNotification('error',_0x47e22e(0x2b2),'فشل\x20حفظ\x20المنتج');}}async function updateProduct(){const _0x2b0a3b=_0x54a1ca,_0x215f2f=document[_0x2b0a3b(0x2b6)](_0x2b0a3b(0x2ab))[_0x2b0a3b(0x1fb)][0x0],_0x25038b={'name':document[_0x2b0a3b(0x2b6)](_0x2b0a3b(0x238))[_0x2b0a3b(0x27e)][_0x2b0a3b(0x229)](),'date':document[_0x2b0a3b(0x2b6)](_0x2b0a3b(0x26c))['value']};if(!_0x25038b[_0x2b0a3b(0x2ba)]){if('gqKeS'===_0x2b0a3b(0x20b)){showNotification(_0x2b0a3b(0x20a),_0x2b0a3b(0x217),_0x2b0a3b(0x1f0));return;}else{_0x27afbd[_0x2b0a3b(0x2b6)](_0x2b0a3b(0x206))['textContent']=_0x2b0a3b(0x202);const _0x22f8dc=_0x17b396[_0x2b0a3b(0x2b6)](_0x2b0a3b(0x248));_0x22f8dc['innerHTML']=_0x2b0a3b(0x211)+(_0x5a0922[_0x2b0a3b(0x2ba)]||'')+_0x2b0a3b(0x21b)+(_0x1f3708[_0x2b0a3b(0x2a4)]||'')+_0x2b0a3b(0x289),_0x4f7c01['getElementById'](_0x2b0a3b(0x21c))[_0x2b0a3b(0x2a9)]='<button\x20class=\x22btn\x20btn-success\x22\x20onclick=\x22updateProduct()\x22><i\x20class=\x22fas\x20fa-save\x22></i>\x20حفظ\x20التعديلات</button>',_0xc68c4[_0x2b0a3b(0x2b6)](_0x2b0a3b(0x277))[_0x2b0a3b(0x284)][_0x2b0a3b(0x231)]=_0x2b0a3b(0x24a),_0x22f8dc[_0x2b0a3b(0x284)][_0x2b0a3b(0x231)]=_0x2b0a3b(0x2ac);}}if(_0x215f2f){showNotification('info','جاري\x20العمل','يتم\x20الآن\x20تحديث\x20صورة\x20المنتج...');const _0x18fa1f=await uploadToImgur(_0x215f2f);if(_0x18fa1f)_0x25038b[_0x2b0a3b(0x26b)]=_0x18fa1f;}try{_0x2b0a3b(0x23a)===_0x2b0a3b(0x22f)?_0x3d7079+=_0x2b0a3b(0x270):(await database['ref']('products/'+currentProduct['code'])[_0x2b0a3b(0x299)](_0x25038b),currentProduct={...currentProduct,..._0x25038b},showNotification(_0x2b0a3b(0x297),'نجاح',_0x2b0a3b(0x1fe)),showProductInfo(currentProduct));}catch(_0x32aec4){showNotification(_0x2b0a3b(0x204),_0x2b0a3b(0x2b2),'فشل\x20تحديث\x20المنتج');}}async function addNewBatch(){const _0x2d195f=_0x54a1ca,_0x3ab073=document[_0x2d195f(0x2b6)](_0x2d195f(0x29a))[_0x2d195f(0x27e)][_0x2d195f(0x229)](),_0x245f2a=Number(document[_0x2d195f(0x2b6)]('batchQuantity')[_0x2d195f(0x27e)]),_0x138102=parseFloat(document[_0x2d195f(0x2b6)]('batchPrice')[_0x2d195f(0x27e)]),_0x26c706=parseFloat(document[_0x2d195f(0x2b6)](_0x2d195f(0x21a))['value']),_0x3ce27b=document[_0x2d195f(0x2b6)](_0x2d195f(0x2a8))[_0x2d195f(0x27e)];if(!_0x245f2a||!_0x3ce27b||!_0x138102||isNaN(_0x26c706)){showNotification(_0x2d195f(0x20a),_0x2d195f(0x217),'الرجاء\x20ملء\x20كل\x20حقول\x20الدفعة.');return;}const _0x2ceacc=database[_0x2d195f(0x20f)]()[_0x2d195f(0x24e)]()[_0x2d195f(0x29f)],_0x231b41={'batchNumber':_0x3ab073,'quantity':_0x245f2a,'price':_0x138102,'cost':_0x26c706,'expiryDate':_0x3ce27b};try{if(_0x2d195f(0x252)!==_0x2d195f(0x25b)){await database[_0x2d195f(0x20f)]('products/'+currentProduct[_0x2d195f(0x244)]+_0x2d195f(0x208)+_0x2ceacc)[_0x2d195f(0x234)](_0x231b41);if(!currentProduct[_0x2d195f(0x286)])currentProduct[_0x2d195f(0x286)]={};currentProduct[_0x2d195f(0x286)][_0x2ceacc]=_0x231b41,showNotification(_0x2d195f(0x297),_0x2d195f(0x23e),'تمت\x20إضافة\x20الدفعة\x20بنجاح'),showProductInfo(currentProduct);}else return;}catch(_0x46da72){showNotification(_0x2d195f(0x204),_0x2d195f(0x2b2),_0x2d195f(0x2b0));}}async function deleteBatch(_0x18fa75){const _0x3b7d4b=_0x54a1ca;if(!confirm(_0x3b7d4b(0x205)))return;try{await database[_0x3b7d4b(0x20f)]('products/'+currentProduct[_0x3b7d4b(0x244)]+'/batches/'+_0x18fa75)[_0x3b7d4b(0x237)](),delete currentProduct[_0x3b7d4b(0x286)][_0x18fa75],showNotification(_0x3b7d4b(0x297),'نجاح',_0x3b7d4b(0x254)),showProductInfo(currentProduct);}catch(_0x7593bd){showNotification(_0x3b7d4b(0x204),'خطأ',_0x3b7d4b(0x1e9));}}async function deleteProduct(){const _0x434720=_0x54a1ca;if(!confirm(_0x434720(0x2a6)))return;try{await database[_0x434720(0x20f)]('products/'+currentProduct[_0x434720(0x244)])[_0x434720(0x237)](),showNotification(_0x434720(0x297),_0x434720(0x23e),'تم\x20حذف\x20المنتج\x20بنجاح'),closeModal(_0x434720(0x25f));}catch(_0x5a7126){showNotification(_0x434720(0x204),_0x434720(0x2b2),_0x434720(0x213));}}function openModal(_0x9837cf){const _0x13e46e=_0x54a1ca;document[_0x13e46e(0x2b6)](_0x9837cf)['style'][_0x13e46e(0x231)]='block';}function _0x534a(){const _0x3fc746=['user_roles/','مدير\x20النظام','yeorN','تم\x20تحديث\x20الدفعة\x20بنجاح','uHYDj','style','toISOString','batches','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22batch-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-warning\x20batch-btn\x22\x20onclick=\x22openEditBatchModal(\x27','notification\x20show\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22editImage\x22\x20class=\x22input-field\x22\x20accept=\x22image/*\x22>','حدث\x20خطأ\x20في\x20الاتصال\x20بقاعدة\x20البيانات','indexOf','<img\x20src=\x22','onAuthStateChanged','fnMoW','kPxZL','batch-card','تم\x20العثور\x20على\x20المنتج','show','manualEntry','link','KLqar','cameraScanner','success','42tdcfJB','update','batchNumber','AyaWPboOqiuzPtS:sqHihbClanmIjkiEXNNviY','index.html','AvVWl','batchPrice','key','zceaJ','aYTUr','الرجاء\x20ملء\x20حقول\x20الكمية\x20والتاريخ.','[AyWPOqizPSsqHihCmIjiEXNNviY]','date','info','هل\x20أنت\x20متأكد\x20من\x20حذف\x20المنتج\x20وكل\x20دفعاته؟','خطأ\x20اتصال','batchExpiry','innerHTML','يرجى\x20إدخال\x20بيانات\x20المنتج\x20الجديد','editImage','block','querySelector','UxrAe','</td></tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr><td\x20class=\x22info-label\x22>إجمالي\x20الكمية:</td><td>','فشل\x20إضافة\x20الدفعة','charCodeAt','خطأ','https://api.imgur.com/3/image','تم\x20إضافة\x20المنتج\x20بنجاح','<button\x20class=\x22btn\x20btn-success\x22\x20onclick=\x22addNewProduct()\x22><i\x20class=\x22fas\x20fa-save\x22></i>\x20حفظ\x20المنتج</button>','getElementById','الرجاء\x20ملء\x20كل\x20الحقول\x20المطلوبة\x20للمنتج\x20والدفعة\x20الأولى.','#batchesContainer','منتج\x20جديد','name','Admin\x20access\x20granted\x20to\x20report\x20page.','جارٍ\x20البحث\x20عن\x20المنتج\x20','location','</td></tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','preventDefault','jpeXg','الرجاء\x20إدخال\x20رقم\x20المنتج','2710qzGKFL','decodeFromVideoDevice','fa-exclamation-triangle','فشل\x20حذف\x20الدفعة','apply','setHours','text','Client-ID\x2096ad0b81a826589','notification','div','اسم\x20المنتج\x20مطلوب','19gRqOfL','hHGJo','إضافة\x20منتج\x20جديد','fhhgu','\x27)\x22><i\x20class=\x22fas\x20fa-edit\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20batch-btn\x22\x20onclick=\x22deleteBatch(\x27','<span\x20class=\x22badge\x20danger\x22><i\x20class=\x22fas\x20fa-times-circle\x22></i>\x20نفد\x20المخزون</span>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin:\x2020px\x200\x2010px;\x22>الدُفعات\x20المتاحة</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22batchesContainer\x22></div>','scannerVideo','onTmI','تعذر\x20تشغيل\x20الكاميرا','files','126XIHqtD','productCodeInput','تم\x20تحديث\x20بيانات\x20المنتج','val','cswAO','wkLbD','تعديل\x20بيانات\x20المنتج','5153735gEEVlk','error','هل\x20أنت\x20متأكد\x20من\x20حذف\x20هذه\x20الدفعة؟','modalTitle','data','/batches/','خطأ\x20كاميرا','warning','gqKeS','json','fa-info-circle','\x20د.م</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>الصلاحية:</strong>\x20','ref','<span\x20class=\x22badge\x20warning\x22><i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20صلاحية\x20قريبة</span>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>هنا\x20يمكنك\x20تعديل\x20البيانات\x20الأساسية\x20للمنتج\x20مثل\x20الاسم.\x20أسعار\x20وتكاليف\x20وكميات\x20الدفعات\x20تعدل\x20بشكل\x20منفصل.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20id=\x22editName\x22\x20class=\x22input-field\x22\x20value=\x22','href','فشل\x20حذف\x20المنتج','editBatchExpiry','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22batch-status-badges\x22>','8365260quwNUp','بيانات\x20ناقصة','يتم\x20الآن\x20رفع\x20صورة\x20المنتج...','BrowserMultiFormatReader','batchCost','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22date\x22\x20id=\x22editDate\x22\x20class=\x22input-field\x22\x20value=\x22','modalActions','AsbqU','forEach','fromCharCode','93878nwjWyL','exists','uid','notification-title','log','entries','flex','ليس\x20لديك\x20صلاحية\x20الوصول\x20لهذه\x20الصفحة.','editBatchModal','trim','إدخال\x20ناقص','MwEiz','4eaHsaf','</td></tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr><td\x20class=\x22info-label\x22>اسم\x20المنتج:</td><td>','quantity','mOegO','role','display','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-grid\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20id=\x22batchNumber\x22\x20class=\x22input-field\x22\x20placeholder=\x22رقم\x20الدفعة\x20(اختياري)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20id=\x22batchQuantity\x22\x20class=\x22input-field\x22\x20placeholder=\x22الكمية\x22\x20min=\x221\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20id=\x22batchCost\x22\x20class=\x22input-field\x22\x20placeholder=\x22تكلفة\x20شراء\x20الدفعة\x22\x20min=\x220\x22\x20step=\x220.01\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20id=\x22batchPrice\x22\x20class=\x22input-field\x22\x20placeholder=\x22سعر\x20بيع\x20الدفعة\x22\x20min=\x220\x22\x20step=\x220.01\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22date\x22\x20id=\x22batchExpiry\x22\x20class=\x22input-field\x22\x20placeholder=\x22تاريخ\x20الصلاحية\x22\x20required>','VgSKK','set','yuPDK','values','remove','editName','write','QqjWF','return\x20(function()\x20','products/','fas\x20','نجاح','reset','1234360SWcJro','cost','append','editBatchCost','code','editBatchPrice','\x22\x20alt=\x22صورة\x20المنتج\x22\x20class=\x22product-image\x22>','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>التكلفة:</strong>\x20','productForm','3417825LkSaOk','none','sshua','once','iZNqo','push','toFixed','length','4191738TsZtYP','TeuBR','focus','تم\x20حذف\x20الدفعة','Enter','[PTKFqQgBTTRqYXDSjFSYHTYkuCdYUjCQhZBUhpJWXjAHwGGdFpwIVZNZGNkpIAIqSYCXFUIKpJUVpdVxVARTEJPCXGzFfhO]','ASmDY','keys','\x20د.م\x20|\x20<strong>البيع:</strong>\x20','createElement','iZKSQ','fa-check-circle','split','appendChild','productModal','\x0a\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20<header>\x0a\x20\x20\x20\x20\x20\x20<h1><i\x20class=\x22fas\x20fa-boxes\x22></i>\x20إدارة\x20المنتجات\x20بنظام\x20الدُفعات</h1>\x0a\x20\x20\x20\x20\x20\x20<p>نظام\x20مسح\x20الباركود\x20وإدارة\x20المخزون\x20حسب\x20تواريخ\x20الصلاحية</p>\x0a\x20\x20\x20\x20</header>\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20<div\x20class=\x22control-buttons\x22>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-primary\x22\x20onclick=\x22toggleCamera()\x22><i\x20class=\x22fas\x20fa-camera\x22></i>\x20مسح\x20الباركود</button>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-secondary\x22\x20onclick=\x22showManualEntry()\x22><i\x20class=\x22fas\x20fa-keyboard\x22></i>\x20إدخال\x20يدوي</button>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20<div\x20class=\x22input-section\x22\x20id=\x22manualEntry\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20id=\x22productCodeInput\x22\x20class=\x22input-field\x22\x20placeholder=\x22أدخل\x20رقم\x20المنتج\x22\x20onkeypress=\x22handleEnter(event)\x22>\x0a\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-success\x22\x20onclick=\x22searchProduct()\x22><i\x20class=\x22fas\x20fa-search\x22></i>\x20بحث</button>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x0a\x0a<div\x20id=\x22cameraScanner\x22>\x0a\x20\x20\x20\x20<video\x20id=\x22scannerVideo\x22\x20muted\x20playsinline></video>\x0a\x20\x20\x20\x20<div\x20class=\x22scanner-overlay\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22scanner-frame\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22scanner-instruction\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-barcode\x20fa-3x\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>وجه\x20الكاميرا\x20نحو\x20الباركود</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a</div>\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20<div\x20class=\x22modal\x22\x20id=\x22productModal\x22>\x0a\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20<span\x20class=\x22close-btn\x22\x20onclick=\x22closeModal(\x27productModal\x27)\x22>&times;</span>\x0a\x20\x20\x20\x20\x20\x20<h2\x20id=\x22modalTitle\x22>معلومات\x20المنتج</h2>\x0a\x20\x20\x20\x20\x20\x20<div\x20id=\x22productInfo\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20id=\x22productForm\x22\x20style=\x22display:\x20none;\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-actions\x22\x20id=\x22modalActions\x22></div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20</div>\x0a\x0a\x0a\x20\x20<div\x20class=\x22modal\x22\x20id=\x22editBatchModal\x22>\x0a\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22close-btn\x22\x20onclick=\x22closeModal(\x27editBatchModal\x27)\x22>&times;</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h2>تعديل\x20الدفعة</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-grid\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20id=\x22editBatchQuantity\x22\x20class=\x22input-field\x22\x20placeholder=\x22الكمية\x22\x20min=\x220\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20id=\x22editBatchPrice\x22\x20class=\x22input-field\x22\x20placeholder=\x22سعر\x20بيع\x20الدفعة\x22\x20min=\x220\x22\x20step=\x220.01\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-grid\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20id=\x22editBatchCost\x22\x20class=\x22input-field\x22\x20placeholder=\x22تكلفة\x20شراء\x20الدفعة\x22\x20min=\x220\x22\x20step=\x220.01\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22date\x22\x20id=\x22editBatchExpiry\x22\x20class=\x22input-field\x22\x20placeholder=\x22تاريخ\x20انتهاء\x20الصلاحية\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-success\x22\x20onclick=\x22updateBatch()\x22><i\x20class=\x22fas\x20fa-save\x22></i>\x20حفظ\x20التعديلات</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20</div>\x0a\x0a\x20\x20<div\x20id=\x22notification\x22\x20class=\x22notification\x22>\x0a\x20\x20\x20\x20\x20\x20<i\x20id=\x22notification-icon\x22\x20class=\x22fas\x20fa-bell\x22></i>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22notification-title\x22\x20class=\x22notification-title\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22notification-message\x22></div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20</div>\x0a','reduce','ceil','database','slice','editBatchQuantity','textContent','FUzOj','map','price','batchQuantity','image','editDate','notification-icon','55VdRqrl','className','<span\x20class=\x22badge\x20danger\x22><i\x20class=\x22fas\x20fa-ban\x22></i>\x20منتهي\x20الصلاحية</span>','EeoUv','\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22editImage\x22\x20class=\x22input-field\x22\x20accept=\x22image/*\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin:\x2020px\x200\x2010px;\x22>الدفعة\x20الأولى\x20(إجباري)</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-grid\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20id=\x22batchNumber\x22\x20class=\x22input-field\x22\x20placeholder=\x22رقم\x20الدفعة\x20(اختياري)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20id=\x22batchQuantity\x22\x20class=\x22input-field\x22\x20placeholder=\x22الكمية\x22\x20min=\x221\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20id=\x22batchCost\x22\x20class=\x22input-field\x22\x20placeholder=\x22تكلفة\x20شراء\x20الدفعة\x22\x20min=\x220\x22\x20step=\x220.01\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22number\x22\x20id=\x22batchPrice\x22\x20class=\x22input-field\x22\x20placeholder=\x22سعر\x20بيع\x20الدفعة\x22\x20min=\x220\x22\x20step=\x220.01\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22date\x22\x20id=\x22batchExpiry\x22\x20class=\x22input-field\x22\x20placeholder=\x22تاريخ\x20الصلاحية\x22\x20required>','POST','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22batch-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22batch-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>الدفعة:</strong>\x20','بحث...','CxbfC','productInfo','classList','.liPTKFqQgBTTlRyanqrYose.XoDSnjFSYHlTYkiuCndYeU;.liljyanroseC.sQhZtBUohrpeJWXjAHwGGdFpwIVZNZGNkpIAIqSYCXFUIKpJUVpdVxVARTEJPCXGzFfhO','فشل\x20تحديث\x20الدفعة','replace','expiryDate','{}.constructor(\x22return\x20this\x22)(\x20)','value'];_0x534a=function(){return _0x3fc746;};return _0x534a();}function closeModal(_0x1b8a91){const _0x1fbb31=_0x54a1ca;document['getElementById'](_0x1b8a91)['style'][_0x1fbb31(0x231)]=_0x1fbb31(0x24a);}let notificationTimeout;function _0x21b0(_0x46f0c0,_0x3a850c){const _0x39d70f=_0x534a();return _0x21b0=function(_0x16bf59,_0x48bd04){_0x16bf59=_0x16bf59-0x1e0;let _0x4b6284=_0x39d70f[_0x16bf59];return _0x4b6284;},_0x21b0(_0x46f0c0,_0x3a850c);}function showNotification(_0x192627,_0x599221,_0x1c4af7){const _0x460063=_0x54a1ca,_0x113644=document[_0x460063(0x2b6)](_0x460063(0x1ee)),_0x4ccc06=document[_0x460063(0x2b6)](_0x460063(0x26d)),_0x531815={'success':_0x460063(0x25c),'warning':_0x460063(0x1e8),'error':'fa-times-circle','info':_0x460063(0x20d)};_0x113644[_0x460063(0x26f)]=_0x460063(0x288)+_0x192627,_0x4ccc06[_0x460063(0x26f)]=_0x460063(0x23d)+_0x531815[_0x192627],document[_0x460063(0x2b6)](_0x460063(0x223))[_0x460063(0x266)]=_0x599221,document['getElementById']('notification-message')[_0x460063(0x266)]=_0x1c4af7,clearTimeout(notificationTimeout),notificationTimeout=setTimeout(()=>{const _0x3e1a7a=_0x460063;_0x113644[_0x3e1a7a(0x278)][_0x3e1a7a(0x237)](_0x3e1a7a(0x292));},0xfa0);}
  </script>
</body>
</html>
