<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>قائمة المنتجات - Lilyan Rose</title>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
  <script src="data/firebase-config.js"></script>
  
  <style>
:root{--primary:#4361ee;--secondary:#3f37c9;--success:#28a745;--danger:#f72585;--warning:#ffc107;--info:#17a2b8;--light:#f8f9fa;--dark:#212529;--gray:#6c757d}*{box-sizing:border-box;margin:0;padding:0;font-family:'Tajawal',Arial,sans-serif}body{background-color:var(--light);color:var(--dark);min-height:100vh}.container{max-width:1200px;margin:0 auto;padding:20px}.page-header{background:linear-gradient(135deg,var(--primary),var(--secondary));color:white;padding:20px;border-radius:12px;margin-bottom:30px;box-shadow:0 4px 20px rgba(67,97,238,0.3);text-align:center}.page-header h1{font-size:2.2rem;margin:0}.controls-container{background:white;padding:20px;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,0.08);margin-bottom:30px;display:flex;flex-direction:column;gap:20px}.top-controls{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;gap:20px}.search-container{flex-grow:1;max-width:500px}.search-container input{width:100%;padding:12px 20px;font-size:1rem;border:1px solid #ddd;border-radius:8px;transition:all 0.3s ease}.search-container input:focus{border-color:var(--primary);outline:none;box-shadow:0 0 0 3px rgba(67,97,238,0.2)}.filters-container{display:flex;flex-wrap:wrap;justify-content:center;gap:15px}.filter-group{display:flex;flex-direction:column;min-width:200px;flex:1}.filter-label{margin-bottom:8px;font-weight:600;color:var(--dark)}.filter-select{padding:10px 15px;border-radius:8px;border:1px solid #ddd;background-color:white;cursor:pointer}.view-controls{display:flex;gap:10px}.view-btn{padding:10px 20px;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;gap:8px;background:#f0f2f5;color:var(--dark)}.view-btn:hover{background-color:#e0e5ec}.view-btn.active{background:var(--primary);color:white}.products-container{display:grid;gap:25px}.products-container.grid-view{grid-template-columns:repeat(auto-fill,minmax(320px,1fr))}.products-container.list-view{grid-template-columns:1fr}.product-card{border:1px solid #e9ecef;border-radius:12px;overflow:hidden;background:white;box-shadow:0 3px 10px rgba(0,0,0,0.05);transition:all 0.3s ease}.product-card:hover{transform:translateY(-5px);box-shadow:0 8px 20px rgba(0,0,0,0.08)}.product-header{background:linear-gradient(135deg,var(--primary),var(--secondary));color:white;padding:15px;font-weight:bold;text-align:center;font-size:1.2rem}.product-body{padding:20px}.product-info p{margin:8px 0;font-size:1rem}.product-info strong{color:var(--secondary)}.product-info .product-id{font-size:0.8rem;color:#6c757d}.product-info .overall-status{margin-top:5px;font-weight:bold;font-size:0.9rem;display:flex;align-items:center;gap:8px}.product-info .overall-status.danger{color:var(--danger)}.product-info .overall-status.warning{color:var(--warning)}.product-info .overall-status.info{color:var(--primary)}.info-image-container{display:flex;align-items:center;justify-content:center;overflow:hidden;margin:0 auto 15px;width:100%;height:180px}.info-image-container img{max-width:100%;max-height:100%;object-fit:contain}.batches-section{border-top:1px solid #eee;margin-top:15px;padding-top:15px}.batch-item{margin-bottom:10px;padding:10px;background:#f8f9fa;border-radius:8px;border-right:3px solid var(--info)}.batch-item.out-of-stock{border-right-color:var(--gray);background-color:#e9ecef;opacity:0.7}.batch-item.out-of-stock .batch-item-details span{text-decoration:line-through}.batch-item-details{display:flex;flex-direction:column;gap:5px;font-size:0.9rem}.batch-status-badges{margin-top:8px;display:flex;flex-wrap:wrap;gap:8px}.badge{padding:4px 10px;border-radius:20px;font-size:0.8rem;font-weight:500;display:inline-flex;align-items:center;gap:5px}.badge.danger{background-color:var(--danger);color:white}.badge.warning{background-color:var(--warning);color:var(--dark)}.badge.info{background-color:var(--info);color:white}.list-view .product-card{display:flex;flex-direction:column}.list-view .product-header{text-align:right;padding-right:20px}.list-view .info-image-container{display:none}#noProducts{text-align:center;color:var(--gray);padding:40px;grid-column:1 / -1;font-size:1.2rem}.loading-spinner{border:4px solid rgba(0,0,0,0.1);border-radius:50%;border-top:4px solid var(--primary);width:40px;height:40px;animation:spin 1s linear infinite;margin:40px auto;grid-column:1 / -1}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
  </style>
</head>
<body>
<script>
const _0x92276b=_0x182a;(function(_0x3854ac,_0x51075c){const _0x4b00f3=_0x182a,_0x5cd6f0=_0x3854ac();while(!![]){try{const _0x467c21=-parseInt(_0x4b00f3(0x206))/0x1*(parseInt(_0x4b00f3(0x1e3))/0x2)+-parseInt(_0x4b00f3(0x23e))/0x3*(parseInt(_0x4b00f3(0x222))/0x4)+-parseInt(_0x4b00f3(0x1f8))/0x5*(parseInt(_0x4b00f3(0x21a))/0x6)+parseInt(_0x4b00f3(0x239))/0x7+parseInt(_0x4b00f3(0x1fa))/0x8+-parseInt(_0x4b00f3(0x20e))/0x9+-parseInt(_0x4b00f3(0x1c6))/0xa*(-parseInt(_0x4b00f3(0x1cf))/0xb);if(_0x467c21===_0x51075c)break;else _0x5cd6f0['push'](_0x5cd6f0['shift']());}catch(_0xe117ee){_0x5cd6f0['push'](_0x5cd6f0['shift']());}}}(_0xf275,0x6d035));function _0xf275(){const _0xb399da=['active','<div\x20id=\x22noProducts\x22>لا\x20توجد\x20منتجات\x20تطابق\x20البحث\x20أو\x20الفلاتر\x20المحددة.</div>','xiwQG','className','login.html','NHXkE','length','location','<p\x20class=\x22overall-status\x20warning\x22><i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20يحتوي\x20على\x20دفعات\x20قريبة\x20الانتهاء</p>','stockFilter','4216506NJNhoG','addEventListener','expiringSoon','expiryFilter','pageTitle','<p\x20class=\x22overall-status\x20danger\x22><i\x20class=\x22fas\x20fa-times-circle\x22></i>\x20نفد\x20المخزون\x20بالكامل</p>','entries','KSaIbBoIuTts:blWmfaUnkQKReCgFiWSSKCBXsC','21484cKvfwP','xthzx','\x20-\x20','[hOvPCILIwcNGDFpBpkhQDHPIucPPVGTRhgDIHRCMYLWgqOvOVDmuZbdBkQYvBmxXAQRLwCAwMMOYDkkjjxxzg]','iFtWP','out-of-stock','<p\x20class=\x22overall-status\x20danger\x22><i\x20class=\x22fas\x20fa-archive\x22></i>\x20يحتوي\x20على\x20دفعات\x20فارغة</p>','sort','createElement','href','input','localeCompare','classList','map','name-asc','<span\x20class=\x22badge\x20danger\x22\x20title=\x22هذه\x20الدفعة\x20منتهية\x20الصلاحية\x22><i\x20class=\x22fas\x20fa-ban\x22></i>\x20منتهية</span>','cKHWi','{}.constructor(\x22return\x20this\x22)(\x20)','div','quantity','return\x20(function()\x20','<span\x20class=\x22badge\x20info\x22\x20title=\x22الكمية\x20المتبقية\x20من\x20هذه\x20الدفعة\x20قليلة\x22><i\x20class=\x22fas\x20fa-box-open\x22></i>\x20كمية\x20قليلة</span>','\x20منتج)','3784074Bpiolb','mzZVm','list','price','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>السعر:</strong>\x20','36YbMInN','BnhsO','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22product-id\x22>#','sortBy','OpSPK','products','CsTDp','-view','some','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22batch-item-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span><strong>الرقم:</strong>\x20','h.lilyanOvroPCse.ILIonlwcNiGnDFepBp;.klhiQlDHyaPIucnPrPVoGsTRhgDIeH.RsCtMYoLrWgeqOvOVDmuZbdBkQYvBmxXAQRLwCAwMMOYDkkjjxxzg','min','apply','onAuthStateChanged','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span><strong>الكمية:</strong>\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>','change','TcpNm','غير\x20محدد','image','RDSiM','log','expired','values','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22batch-item\x20','4954810krDdUv','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22product-header\x22>','foRYw','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22batch-status-badges\x22>','replace','ocFyq','قائمة\x20المنتجات\x20(','productsContainer','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22product-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22product-name\x22\x20style=\x22font-size:1.2rem;\x20font-weight:600;\x22>','22TXhPMe','join','toFixed','FpChD','click','max','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22batches-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22margin-bottom:\x2010px;\x20color:\x20var(--secondary);\x22>الدُفعات:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','HbAal','expiry-asc','<span\x20class=\x22badge\x20warning\x22\x20title=\x22صلاحية\x20هذه\x20الدفعة\x20تنتهي\x20قريباً\x22><i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20صلاحية\x20قريبة</span>','toLowerCase','price-desc','unuyM','valid','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','\x20د.م','reduce','indexOf','fromCharCode','setHours','37866uwlyfH','name-desc','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span><strong>السعر:</strong>\x20','createDocumentFragment','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22product-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22info-image-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','searchProductInput','\x22\x20alt=\x22صورة\x20المنتج\x22\x20loading=\x22lazy\x22>','<p\x20class=\x22overall-status\x20info\x22><i\x20class=\x22fas\x20fa-box-open\x22></i>\x20المخزون\x20الإجمالي\x20قليل</p>','[KSIBITsWmfUQKReCgFiWSSKCBXsC]','appendChild','cThOa','<span\x20class=\x22badge\x20danger\x22\x20title=\x22كمية\x20هذه\x20الدفعة\x20صفر\x22><i\x20class=\x22fas\x20fa-times-circle\x22></i>\x20نفدت</span>','innerHTML','Uvkfo','Access\x20granted\x20for\x20logged-in\x20user.','filter','value','getElementById','name','charCodeAt','batches','5aCCgvP','expiryDate','1167632hOhldN','products-container\x20','outOfStock','BWvPb','auth','slice','forEach','ref','\x20د.م</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span><strong>الصلاحية:</strong>\x20','WosKy','9999-12-31','lowStock','1ADECeY','DxCDQ','inStock','gridViewBtn','\x0a<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20<header\x20class=\x22page-header\x22><h1\x20id=\x22pageTitle\x22>قائمة\x20المنتجات</h1></header>\x0a\x0a\x20\x20\x20\x20<div\x20class=\x22controls-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-controls\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22search-container\x22><input\x20type=\x22text\x22\x20id=\x22searchProductInput\x22\x20placeholder=\x22ابحث\x20عن\x20منتج\x20بالاسم...\x22\x20aria-label=\x22بحث\x20عن\x20المنتجات\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22view-controls\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22gridViewBtn\x22\x20class=\x22view-btn\x20active\x22\x20title=\x22عرض\x20شبكة\x22><i\x20class=\x22fas\x20fa-th\x22></i>\x20<span>شبكة</span></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22listViewBtn\x22\x20class=\x22view-btn\x22\x20title=\x22عرض\x20قائمة\x22><i\x20class=\x22fas\x20fa-list\x22></i>\x20<span>قائمة</span></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22filters-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22filter-group\x22><label\x20for=\x22stockFilter\x22\x20class=\x22filter-label\x22>حالة\x20المخزون:</label><select\x20id=\x22stockFilter\x22\x20class=\x22filter-select\x22><option\x20value=\x22\x22>الكل</option><option\x20value=\x22inStock\x22>متوفر</option><option\x20value=\x22lowStock\x22>كمية\x20قليلة</option><option\x20value=\x22outOfStock\x22>نفد</option></select></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22filter-group\x22><label\x20for=\x22expiryFilter\x22\x20class=\x22filter-label\x22>حالة\x20الصلاحية:</label><select\x20id=\x22expiryFilter\x22\x20class=\x22filter-select\x22><option\x20value=\x22\x22>الكل</option><option\x20value=\x22valid\x22>صالح</option><option\x20value=\x22expiringSoon\x22>ينتهي\x20قريباً</option><option\x20value=\x22expired\x22>منتهي</option></select></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22filter-group\x22><label\x20for=\x22sortBy\x22\x20class=\x22filter-label\x22>ترتيب\x20حسب:</label><select\x20id=\x22sortBy\x22\x20class=\x22filter-select\x22><option\x20value=\x22name-asc\x22>الاسم\x20(أ-ي)</option><option\x20value=\x22name-desc\x22>الاسم\x20(ي-أ)</option><option\x20value=\x22price-asc\x22>السعر\x20(منخفض-عالي)</option><option\x20value=\x22price-desc\x22>السعر\x20(عالي-منخفض)</option><option\x20value=\x22expiry-asc\x22>الصلاحية\x20(قريب-بعيد)</option></select></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20<div\x20id=\x22productsContainer\x22\x20class=\x22products-container\x20grid-view\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22loading-spinner\x22></div>\x0a\x20\x20\x20\x20</div>\x0a</div>\x0a','<i\x20class=\x22fas\x20fa-image\x20fa-3x\x22\x20style=\x22color:\x20#ccc;\x22></i>','grid','includes','4003605hoMedN','ceil'];_0xf275=function(){return _0xb399da;};return _0xf275();}const _0x47ed47=(function(){let _0x4f2842=!![];return function(_0x3c8407,_0x529c43){const _0x4bfa58=_0x182a;if('FpChD'!==_0x4bfa58(0x1d2))_0x2b76c7+=_0x4bfa58(0x1ea);else{const _0x4db3d8=_0x4f2842?function(){const _0xe71151=_0x4bfa58;if(_0x529c43){const _0x26a31f=_0x529c43[_0xe71151(0x24a)](_0x3c8407,arguments);return _0x529c43=null,_0x26a31f;}}:function(){};return _0x4f2842=![],_0x4db3d8;}};}()),_0x46d5e1=_0x47ed47(this,function(){const _0x247f96=_0x182a;let _0x478d7a;try{const _0x49317a=Function(_0x247f96(0x236)+_0x247f96(0x233)+');');_0x478d7a=_0x49317a();}catch(_0x18befa){_0x478d7a=window;}const _0x111aad=new RegExp(_0x247f96(0x225),'g'),_0x643a66=_0x247f96(0x248)['replace'](_0x111aad,'')['split'](';');let _0x46ad30,_0x45a7e0,_0x1b86eb,_0x41f395;const _0x4338a8=function(_0x44e870,_0x33b286,_0x377887){const _0x1b6661=_0x247f96;if(_0x44e870[_0x1b6661(0x216)]!=_0x33b286)return![];for(let _0x13dee3=0x0;_0x13dee3<_0x33b286;_0x13dee3++){if(_0x1b6661(0x223)===_0x1b6661(0x207))_0x5b3fff(_0x2cbb88),_0x1f1dac=_0x5c29a8(_0x2e6dc2,0x12c);else for(let _0x38d5ca=0x0;_0x38d5ca<_0x377887[_0x1b6661(0x216)];_0x38d5ca+=0x2){if(_0x13dee3==_0x377887[_0x38d5ca]&&_0x44e870[_0x1b6661(0x1f6)](_0x13dee3)!=_0x377887[_0x38d5ca+0x1])return![];}}return!![];},_0x58ea57=function(_0x7af023,_0x5f0baa,_0x42acdf){return _0x4338a8(_0x5f0baa,_0x42acdf,_0x7af023);},_0x537ea7=function(_0x2f8578,_0xb53fab,_0x4bd8f7){const _0x7eb49e=_0x247f96;if(_0x7eb49e(0x1db)!=='XwhAI')return _0x58ea57(_0xb53fab,_0x2f8578,_0x4bd8f7);else return;},_0x25d641=function(_0x4aaea4,_0x10807e,_0x3a0063){const _0x2f1312=_0x247f96;if(_0x2f1312(0x23a)===_0x2f1312(0x212))for(let _0x123c3f=0x0;_0x123c3f<_0x22da64[_0x2f1312(0x216)];_0x123c3f+=0x2){if(_0x10197e==_0xcfa95e[_0x123c3f]&&_0xace323[_0x2f1312(0x1f6)](_0xc05b47)!=_0x28be96[_0x123c3f+0x1])return![];}else return _0x537ea7(_0x10807e,_0x3a0063,_0x4aaea4);};for(let _0x53f9e9 in _0x478d7a){if(_0x4338a8(_0x53f9e9,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x46ad30=_0x53f9e9;break;}}for(let _0x30c59e in _0x478d7a[_0x46ad30]){if(_0x247f96(0x203)==='RxyaV')_0x5c86ed+=_0x247f96(0x1ee);else{if(_0x25d641(0x6,_0x30c59e,[0x5,0x6e,0x0,0x64])){_0x45a7e0=_0x30c59e;break;}}}for(let _0x40b5b4 in _0x478d7a[_0x46ad30]){if(_0x537ea7(_0x40b5b4,[0x7,0x6e,0x0,0x6c],0x8)){_0x1b86eb=_0x40b5b4;break;}}if(!('~'>_0x45a7e0))for(let _0x13df49 in _0x478d7a[_0x46ad30][_0x1b86eb]){if(_0x58ea57([0x7,0x65,0x0,0x68],_0x13df49,0x8)){_0x41f395=_0x13df49;break;}}if(!_0x46ad30||!_0x478d7a[_0x46ad30])return;const _0x51d17a=_0x478d7a[_0x46ad30][_0x45a7e0],_0x306e84=!!_0x478d7a[_0x46ad30][_0x1b86eb]&&_0x478d7a[_0x46ad30][_0x1b86eb][_0x41f395],_0x1e1280=_0x51d17a||_0x306e84;if(!_0x1e1280){if(_0x247f96(0x215)!==_0x247f96(0x1d6))return;else{if(!_0x40aa27[_0x247f96(0x1f7)])return _0x316b26;const _0x2b5dd2=_0x5b3ebe[_0x247f96(0x1c4)](_0x259ca9['batches'])['map'](_0xd40327=>_0xd40327[_0x247f96(0x23c)])[_0x247f96(0x1f2)](_0x44ddcd=>_0x44ddcd!=null);return _0x2b5dd2[_0x247f96(0x216)]>0x0?_0x1bb9c7[_0x247f96(0x249)](..._0x2b5dd2):_0x11e574;}}let _0x20e25b=![];for(let _0x299a80=0x0;_0x299a80<_0x643a66['length'];_0x299a80++){const _0x1339bc=_0x643a66[_0x299a80],_0x161130=_0x1339bc[0x0]===String[_0x247f96(0x1e1)](0x2e)?_0x1339bc[_0x247f96(0x1ff)](0x1):_0x1339bc,_0x340947=_0x1e1280[_0x247f96(0x216)]-_0x161130['length'],_0x25ae1d=_0x1e1280['indexOf'](_0x161130,_0x340947),_0x4ed7e9=_0x25ae1d!==-0x1&&_0x25ae1d===_0x340947;_0x4ed7e9&&(_0x247f96(0x226)!==_0x247f96(0x226)?_0x541a23['getElementById'](_0x1ebb17)[_0x247f96(0x21b)]('change',_0x154069):(_0x1e1280[_0x247f96(0x216)]==_0x1339bc['length']||_0x1339bc[_0x247f96(0x1e0)]('.')===0x0)&&(_0x20e25b=!![]));}if(!_0x20e25b){if(_0x247f96(0x232)==='VshlS'){const _0xa19ca2=_0x473958['apply'](_0x50458b,arguments);return _0x3c0309=null,_0xa19ca2;}else{const _0x2e1446=new RegExp(_0x247f96(0x1eb),'g'),_0x1ea277=_0x247f96(0x221)[_0x247f96(0x1ca)](_0x2e1446,'');_0x478d7a[_0x46ad30][_0x1b86eb]=_0x1ea277;}}});_0x46d5e1(),document['write'](_0x92276b(0x20a)),document['addEventListener']('DOMContentLoaded',function(){const _0x1e308a=_0x92276b;firebase[_0x1e308a(0x1fe)]()[_0x1e308a(0x24b)](function(_0x587dbf){const _0xdfd8fe=_0x1e308a;if(_0x587dbf){if(_0xdfd8fe(0x244)!==_0xdfd8fe(0x244)){const _0x160799=_0x23cb3e(_0x5a38d2),_0x4cd84e=(_0x97f9c0[_0xdfd8fe(0x235)]||0x0)<=0x0?_0xdfd8fe(0x227):'';return _0xdfd8fe(0x1c5)+_0x4cd84e+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22batch-item-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span><strong>الرقم:</strong>\x20'+(_0x3bc231['batchNumber']||'-')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span><strong>الكمية:</strong>\x20'+_0x157abd['quantity']+_0xdfd8fe(0x1e5)+(_0x4a2f98[_0xdfd8fe(0x23c)]||0x0)[_0xdfd8fe(0x1d1)](0x2)+_0xdfd8fe(0x202)+_0x373d16[_0xdfd8fe(0x1f9)]+_0xdfd8fe(0x1c9)+_0x160799+_0xdfd8fe(0x1dd);}else console[_0xdfd8fe(0x1c2)](_0xdfd8fe(0x1f1));}else{if('OXmQA'!==_0xdfd8fe(0x1fd))window[_0xdfd8fe(0x217)][_0xdfd8fe(0x22b)]=_0xdfd8fe(0x214);else return![];}});});let allProducts=[],debounceTimer;function _0x182a(_0x515288,_0x44c0aa){const _0x367962=_0xf275();return _0x182a=function(_0x46d5e1,_0x47ed47){_0x46d5e1=_0x46d5e1-0x1be;let _0xdc6f29=_0x367962[_0x46d5e1];return _0xdc6f29;},_0x182a(_0x515288,_0x44c0aa);}document[_0x92276b(0x21b)]('DOMContentLoaded',()=>{initProducts(),setupEventListeners();});function initProducts(){const _0x5bfbb6=_0x92276b;database[_0x5bfbb6(0x201)](_0x5bfbb6(0x243))['on']('value',_0x5c80d3=>{const _0x114b90=_0x5bfbb6;if(_0x114b90(0x1be)==='JeNiV')return;else{const _0x602a0b=_0x5c80d3['val']()||{};allProducts=Object[_0x114b90(0x220)](_0x602a0b)[_0x114b90(0x22f)](([_0x21e124,_0xf9c87f])=>({'id':_0x21e124,..._0xf9c87f})),applyFiltersAndSort(),updateProductCount();}});}function setupEventListeners(){const _0x123965=_0x92276b;document[_0x123965(0x1f4)](_0x123965(0x1e8))[_0x123965(0x21b)](_0x123965(0x22c),()=>{clearTimeout(debounceTimer),debounceTimer=setTimeout(applyFiltersAndSort,0x12c);}),[_0x123965(0x219),_0x123965(0x21d),_0x123965(0x241)]['forEach'](_0x25cb43=>{const _0x43f095=_0x123965;document[_0x43f095(0x1f4)](_0x25cb43)['addEventListener'](_0x43f095(0x24e),applyFiltersAndSort);}),document[_0x123965(0x1f4)](_0x123965(0x209))[_0x123965(0x21b)](_0x123965(0x1d3),()=>setViewMode(_0x123965(0x20c))),document[_0x123965(0x1f4)]('listViewBtn')['addEventListener'](_0x123965(0x1d3),()=>setViewMode(_0x123965(0x23b)));}function setViewMode(_0x3673d1){const _0x46a5ca=_0x92276b,_0x316318=document[_0x46a5ca(0x1f4)](_0x46a5ca(0x1cd)),_0x4c7b78=document[_0x46a5ca(0x1f4)](_0x46a5ca(0x209)),_0x41c0f9=document[_0x46a5ca(0x1f4)]('listViewBtn');_0x316318[_0x46a5ca(0x213)]=_0x46a5ca(0x1fb)+_0x3673d1+_0x46a5ca(0x245),_0x4c7b78['classList']['toggle'](_0x46a5ca(0x210),_0x3673d1==='grid'),_0x41c0f9[_0x46a5ca(0x22e)]['toggle']('active',_0x3673d1===_0x46a5ca(0x23b));}function applyFiltersAndSort(){const _0x2a637c=_0x92276b,_0x2b3fc4=document[_0x2a637c(0x1f4)]('searchProductInput')[_0x2a637c(0x1f3)]['trim']()[_0x2a637c(0x1d9)](),_0xb6455d=document[_0x2a637c(0x1f4)]('stockFilter')['value'],_0x2f02cf=document['getElementById'](_0x2a637c(0x21d))[_0x2a637c(0x1f3)],_0x3b9f20=document[_0x2a637c(0x1f4)](_0x2a637c(0x241))[_0x2a637c(0x1f3)];let _0x1fedeb=allProducts[_0x2a637c(0x1f2)](_0x252bf4=>{const _0x3d7afd=_0x2a637c;if(_0x3d7afd(0x1ed)==='HxRvl')_0x1939cf+=_0x3d7afd(0x237);else{const _0x1bfb67=calculateTotalQuantity(_0x252bf4[_0x3d7afd(0x1f7)]),_0x401b47=_0x2b3fc4===''||(_0x252bf4['name']||'')[_0x3d7afd(0x1d9)]()[_0x3d7afd(0x20d)](_0x2b3fc4),_0x264cf9=_0xb6455d===''||_0xb6455d===_0x3d7afd(0x208)&&_0x1bfb67>0x0||_0xb6455d===_0x3d7afd(0x205)&&_0x1bfb67>0x0&&_0x1bfb67<=0x5||_0xb6455d===_0x3d7afd(0x1fc)&&_0x1bfb67<=0x0,_0x2b0995=_0x2f02cf===''||_0x2f02cf===_0x3d7afd(0x1dc)&&!hasStatus(_0x252bf4,_0x3d7afd(0x1c3))&&!hasStatus(_0x252bf4,'expiringSoon')||_0x2f02cf===_0x3d7afd(0x21c)&&hasStatus(_0x252bf4,_0x3d7afd(0x21c))||_0x2f02cf===_0x3d7afd(0x1c3)&&hasStatus(_0x252bf4,_0x3d7afd(0x1c3));return _0x401b47&&_0x264cf9&&_0x2b0995;}});sortProducts(_0x1fedeb,_0x3b9f20),displayProducts(_0x1fedeb);}function displayProducts(_0x27a551){const _0x11848f=_0x92276b,_0x1c7823=document[_0x11848f(0x1f4)](_0x11848f(0x1cd));_0x1c7823[_0x11848f(0x1ef)]='';if(_0x27a551[_0x11848f(0x216)]===0x0){_0x1c7823[_0x11848f(0x1ef)]=_0x11848f(0x211);return;}const _0x13a242=document[_0x11848f(0x1e6)]();_0x27a551[_0x11848f(0x200)](_0x1d79fd=>_0x13a242[_0x11848f(0x1ec)](createProductCard(_0x1d79fd))),_0x1c7823['appendChild'](_0x13a242);}function createProductCard(_0x11f5d7){const _0x3e525d=_0x92276b,_0x3c8aec=document[_0x3e525d(0x22a)](_0x3e525d(0x234));_0x3c8aec['className']='product-card';const _0x53b665=calculateTotalQuantity(_0x11f5d7[_0x3e525d(0x1f7)]),_0x2dcf57=getPriceRange(_0x11f5d7),_0x4aa793=getOverallStatusText(_0x11f5d7);return _0x3c8aec['innerHTML']=_0x3e525d(0x1c7)+(_0x11f5d7[_0x3e525d(0x1f5)]||'منتج\x20بدون\x20اسم')+_0x3e525d(0x1e7)+(_0x11f5d7[_0x3e525d(0x1c0)]?'<img\x20src=\x22'+_0x11f5d7[_0x3e525d(0x1c0)]+_0x3e525d(0x1e9):_0x3e525d(0x20b))+_0x3e525d(0x1ce)+(_0x11f5d7[_0x3e525d(0x1f5)]||'')+_0x3e525d(0x23d)+_0x2dcf57+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>الكمية\x20الإجمالية:</strong>\x20'+_0x53b665+_0x3e525d(0x240)+_0x11f5d7['id']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22overall-status-container\x22>'+_0x4aa793+_0x3e525d(0x1d5)+getBatchesHTML(_0x11f5d7[_0x3e525d(0x1f7)])+_0x3e525d(0x24d),_0x3c8aec;}function getBatchesHTML(_0x111b6e){const _0x4972d0=_0x92276b;if(!_0x111b6e)return'<p>لا\x20توجد\x20دفعات.</p>';return Object[_0x4972d0(0x1c4)](_0x111b6e)[_0x4972d0(0x22f)](_0x28e6b6=>{const _0x353d86=_0x4972d0,_0x25efb9=getIndividualBatchBadges(_0x28e6b6),_0x29a70f=(_0x28e6b6[_0x353d86(0x235)]||0x0)<=0x0?_0x353d86(0x227):'';return _0x353d86(0x1c5)+_0x29a70f+_0x353d86(0x247)+(_0x28e6b6['batchNumber']||'-')+_0x353d86(0x24c)+_0x28e6b6['quantity']+_0x353d86(0x1e5)+(_0x28e6b6['price']||0x0)[_0x353d86(0x1d1)](0x2)+_0x353d86(0x202)+_0x28e6b6[_0x353d86(0x1f9)]+_0x353d86(0x1c9)+_0x25efb9+_0x353d86(0x1dd);})[_0x4972d0(0x1d0)]('');}function getIndividualBatchBadges(_0x2740bb){const _0x561641=_0x92276b;let _0x3ec6f8='';const _0x596277=new Date();_0x596277[_0x561641(0x1e2)](0x0,0x0,0x0,0x0);const _0x5e5b06=new Date(_0x2740bb[_0x561641(0x1f9)]),_0x4f9bcf=Math['ceil']((_0x5e5b06-_0x596277)/(0x3e8*0x3c*0x3c*0x18));if(_0x4f9bcf<0x0)_0x3ec6f8+=_0x561641(0x231);else{if(_0x4f9bcf<=0x1e){if(_0x561641(0x1f0)!=='Uvkfo')return _0xf6f4f3(_0x126bcb,_0x602ed1,_0x8f9a70);else _0x3ec6f8+=_0x561641(0x1d8);}}if((_0x2740bb[_0x561641(0x235)]||0x0)<=0x0){if('RDSiM'===_0x561641(0x1c1))_0x3ec6f8+=_0x561641(0x1ee);else{if(!_0x3dd2db[_0x561641(0x1f7)])return![];return _0x1e8939['values'](_0xd91bff[_0x561641(0x1f7)])['some'](_0x10dc56=>(_0x10dc56[_0x561641(0x235)]||0x0)<=0x0);}}else{if(_0x2740bb[_0x561641(0x235)]<=0x5){if(_0x561641(0x1cb)===_0x561641(0x1cb))_0x3ec6f8+=_0x561641(0x237);else{if(_0x171ee9){const _0x5876a1=_0xc645ed[_0x561641(0x24a)](_0x512b1f,arguments);return _0x14b105=null,_0x5876a1;}}}}return _0x3ec6f8;}function getOverallStatusText(_0x21d318){const _0x3ff70f=_0x92276b;let _0x4ba096='';const _0x343ac0=calculateTotalQuantity(_0x21d318[_0x3ff70f(0x1f7)]);if(_0x343ac0<=0x0)return _0x3ff70f(0x21f);return hasStatus(_0x21d318,_0x3ff70f(0x1c3))&&(_0x4ba096+='<p\x20class=\x22overall-status\x20danger\x22><i\x20class=\x22fas\x20fa-ban\x22></i>\x20يحتوي\x20على\x20دفعات\x20منتهية\x20الصلاحية</p>'),hasOutOfStockBatches(_0x21d318)&&(_0x4ba096+=_0x3ff70f(0x228)),hasStatus(_0x21d318,'expiringSoon')&&(_0x3ff70f(0x1c8)===_0x3ff70f(0x23f)?_0x49c776[_0x3ff70f(0x229)]((_0x3d6745,_0x4dd01c)=>{const _0x63afcf=_0x3ff70f;switch(_0x51dec8){case'name-asc':return(_0x3d6745[_0x63afcf(0x1f5)]||'')[_0x63afcf(0x22d)](_0x4dd01c['name']||'','ar');case _0x63afcf(0x1e4):return(_0x4dd01c[_0x63afcf(0x1f5)]||'')[_0x63afcf(0x22d)](_0x3d6745['name']||'','ar');case'price-asc':return _0x578059(_0x3d6745)-_0xdea8fe(_0x4dd01c);case'price-desc':return _0x221643(_0x4dd01c)-_0x1453a2(_0x3d6745);case _0x63afcf(0x1d7):return new _0x17c3ab(_0x3e1319(_0x3d6745))-new _0x40901a(_0x86ef10(_0x4dd01c));default:return 0x0;}}):_0x4ba096+=_0x3ff70f(0x218)),_0x343ac0>0x0&&_0x343ac0<=0x5&&(_0x4ba096+='<p\x20class=\x22overall-status\x20info\x22><i\x20class=\x22fas\x20fa-box-open\x22></i>\x20المخزون\x20الإجمالي\x20قليل</p>'),_0x4ba096;}function sortProducts(_0x22799a,_0x5f13f3){const _0x4e2255=_0x92276b;_0x22799a[_0x4e2255(0x229)]((_0x9090d5,_0x39002c)=>{const _0x45bd9b=_0x4e2255;if('OpSPK'===_0x45bd9b(0x242))switch(_0x5f13f3){case _0x45bd9b(0x230):return(_0x9090d5[_0x45bd9b(0x1f5)]||'')[_0x45bd9b(0x22d)](_0x39002c[_0x45bd9b(0x1f5)]||'','ar');case _0x45bd9b(0x1e4):return(_0x39002c[_0x45bd9b(0x1f5)]||'')[_0x45bd9b(0x22d)](_0x9090d5[_0x45bd9b(0x1f5)]||'','ar');case'price-asc':return getMinPrice(_0x9090d5)-getMinPrice(_0x39002c);case _0x45bd9b(0x1da):return getMinPrice(_0x39002c)-getMinPrice(_0x9090d5);case _0x45bd9b(0x1d7):return new Date(getOldestExpiry(_0x9090d5))-new Date(getOldestExpiry(_0x39002c));default:return 0x0;}else{const _0x477971=_0x4064a5[_0x45bd9b(0x1f4)](_0x45bd9b(0x1e8))[_0x45bd9b(0x1f3)]['trim']()[_0x45bd9b(0x1d9)](),_0x127280=_0x314264[_0x45bd9b(0x1f4)](_0x45bd9b(0x219))['value'],_0x56c4d9=_0x2fbed1[_0x45bd9b(0x1f4)]('expiryFilter')['value'],_0x66307c=_0x5ec715[_0x45bd9b(0x1f4)](_0x45bd9b(0x241))['value'];let _0x951b2f=_0x37cbd8[_0x45bd9b(0x1f2)](_0x20f863=>{const _0x28cb32=_0x45bd9b,_0x570bf8=_0x4ff4fd(_0x20f863[_0x28cb32(0x1f7)]),_0x43ac1e=_0x477971===''||(_0x20f863['name']||'')[_0x28cb32(0x1d9)]()[_0x28cb32(0x20d)](_0x477971),_0x55eeca=_0x127280===''||_0x127280===_0x28cb32(0x208)&&_0x570bf8>0x0||_0x127280===_0x28cb32(0x205)&&_0x570bf8>0x0&&_0x570bf8<=0x5||_0x127280==='outOfStock'&&_0x570bf8<=0x0,_0x396d35=_0x56c4d9===''||_0x56c4d9===_0x28cb32(0x1dc)&&!_0x385ebc(_0x20f863,'expired')&&!_0x1a00d4(_0x20f863,'expiringSoon')||_0x56c4d9==='expiringSoon'&&_0x8351de(_0x20f863,_0x28cb32(0x21c))||_0x56c4d9==='expired'&&_0x3d924d(_0x20f863,_0x28cb32(0x1c3));return _0x43ac1e&&_0x55eeca&&_0x396d35;});_0x44cca5(_0x951b2f,_0x66307c),_0x1af048(_0x951b2f);}});}function updateProductCount(){const _0x4cd39b=_0x92276b;document[_0x4cd39b(0x1f4)](_0x4cd39b(0x21e))['textContent']=_0x4cd39b(0x1cc)+allProducts[_0x4cd39b(0x216)]+_0x4cd39b(0x238);}function calculateTotalQuantity(_0x1e139e){const _0x34646f=_0x92276b;return _0x1e139e?Object[_0x34646f(0x1c4)](_0x1e139e)[_0x34646f(0x1df)]((_0x4cff88,_0x16345d)=>_0x4cff88+(Number(_0x16345d['quantity'])||0x0),0x0):0x0;}function getPriceRange(_0x3c8b11){const _0x59222c=_0x92276b;if(!_0x3c8b11[_0x59222c(0x1f7)])return _0x59222c(0x1bf);const _0x370085=Object[_0x59222c(0x1c4)](_0x3c8b11[_0x59222c(0x1f7)])['map'](_0x443359=>_0x443359[_0x59222c(0x23c)])['filter'](_0x1e6cbc=>_0x1e6cbc!=null&&_0x1e6cbc>0x0);if(_0x370085[_0x59222c(0x216)]===0x0)return _0x59222c(0x1bf);const _0x2b0365=Math['min'](..._0x370085),_0x71cd09=Math[_0x59222c(0x1d4)](..._0x370085);return _0x2b0365===_0x71cd09?_0x2b0365[_0x59222c(0x1d1)](0x2)+_0x59222c(0x1de):_0x2b0365[_0x59222c(0x1d1)](0x2)+_0x59222c(0x224)+_0x71cd09[_0x59222c(0x1d1)](0x2)+_0x59222c(0x1de);}function getMinPrice(_0x54a26e){const _0x30a3ee=_0x92276b;if(!_0x54a26e[_0x30a3ee(0x1f7)])return Infinity;const _0x19e1bf=Object[_0x30a3ee(0x1c4)](_0x54a26e[_0x30a3ee(0x1f7)])[_0x30a3ee(0x22f)](_0x5af0b0=>_0x5af0b0[_0x30a3ee(0x23c)])[_0x30a3ee(0x1f2)](_0x5d1a96=>_0x5d1a96!=null);return _0x19e1bf[_0x30a3ee(0x216)]>0x0?Math[_0x30a3ee(0x249)](..._0x19e1bf):Infinity;}function getOldestExpiry(_0xbf18d2){const _0x1f2749=_0x92276b;if(!_0xbf18d2['batches'])return _0x1f2749(0x204);const _0x3e2755=Object[_0x1f2749(0x1c4)](_0xbf18d2[_0x1f2749(0x1f7)])[_0x1f2749(0x22f)](_0x49bbdd=>_0x49bbdd['expiryDate'])[_0x1f2749(0x1f2)](_0x4b4f81=>_0x4b4f81);return _0x3e2755[_0x1f2749(0x216)]>0x0?_0x3e2755[_0x1f2749(0x229)]()[0x0]:_0x1f2749(0x204);}function hasStatus(_0x37cdcc,_0x2dbe85){const _0x3038bb=_0x92276b;if(!_0x37cdcc['batches'])return![];const _0x44e99c=new Date();return _0x44e99c['setHours'](0x0,0x0,0x0,0x0),Object['values'](_0x37cdcc[_0x3038bb(0x1f7)])[_0x3038bb(0x246)](_0x20cf57=>{const _0x51d78f=_0x3038bb;if(!_0x20cf57[_0x51d78f(0x1f9)])return![];const _0x547a9a=new Date(_0x20cf57[_0x51d78f(0x1f9)]),_0x5d80f2=Math[_0x51d78f(0x20f)]((_0x547a9a-_0x44e99c)/(0x3e8*0x3c*0x3c*0x18));if(_0x2dbe85===_0x51d78f(0x1c3))return _0x5d80f2<0x0;if(_0x2dbe85==='expiringSoon')return _0x5d80f2>=0x0&&_0x5d80f2<=0x1e;return![];});}function hasOutOfStockBatches(_0x1f758e){const _0x26dab5=_0x92276b;if(!_0x1f758e[_0x26dab5(0x1f7)])return![];return Object['values'](_0x1f758e['batches'])[_0x26dab5(0x246)](_0x35ac34=>(_0x35ac34[_0x26dab5(0x235)]||0x0)<=0x0);}
</script>

</body>
</html>
